<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        .modal-overlay { z-index: 3000; }
        .dropdown-menu.show { display: block !important; }
    </style>
</head>
<body class="dashboard-body">
    <nav class="navbar">
        <i class="fas fa-bars" id="menu-toggle" style="font-size: 1.5rem; cursor: pointer; display: none; margin-right: 15px;"></i>
        <div class="nav-brand">
            <div class="logo-container">
                <img src="Image/TanamanLogo.png" alt="Logo" class="nav-logo">
            </div>
            <span class="company-name">Tanaman</span>
        </div>

        <div class="nav-profile" id="profile-trigger">
            <div class="profile-text">
                <span class="profile-name">Marc Lester</span>
                <span class="profile-role">Admin</span>
            </div>
            <img src="Image/images.jpg" alt="Profile" class="profile-pic">
            <i class="fas fa-chevron-down dropdown-icon"></i>

            <div class="dropdown-menu" id="profile-dropdown">
                <div class="dropdown-header">
                    <div class="user-name">Marc Lester</div>
                    <div class="user-email">marclester@gmail.com</div>
                </div>
                <hr class="dropdown-divider">
                <a href="myProfile.html" class="dropdown-item"><i class="far fa-user"></i><span>My Profile</span></a>
                <a href="#" class="dropdown-item"><i class="fas fa-cog"></i><span>Account Setting</span></a>
                <hr class="dropdown-divider">
                <a href="index.html" class="dropdown-item logout-item"><i class="fas fa-sign-out-alt"></i><span>Sign Out</span></a>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li><a href="dashboard.html" class="active"><i class="fas fa-th-large"></i> <span>Dashboard</span></a></li>
                <li><a href="client.html"><i class="fas fa-user-friends"></i> <span>Clients</span></a></li>
                <li><a href="project.html"><i class="fas fa-briefcase"></i> <span>Projects</span></a></li>
                <li><a href="employee.html"><i class="fas fa-user-check"></i> <span>Employees</span></a></li>
                <li><a href="quote.html"><i class="fas fa-file-invoice"></i> <span>Quotes</span></a></li>
                <li><a href="invoice.html"><i class="fas fa-file-invoice-dollar"></i> <span>Invoices</span></a></li>
                <li><a href="inventory.html"><i class="fas fa-box"></i> <span>Inventory</span></a></li>
            </ul>
            <div class="sidebar-footer">
                <a href="index.html" class="sign-out-link"><i class="fas fa-sign-out-alt"></i> <span>Sign Out</span></a>
            </div>
        </aside>

        <main class="main-content">
            
            <header class="content-header">
                <h2>Dashboard</h2>
                <p>Welcome back, here's what's happening today.</p>
            </header>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-text">
                        <h3>Total Clients</h3>
                        <p class="number">1</p>
                        <a href="client.html" class="details-link">View details</a>
                    </div>
                    <div class="stat-icon icon-bg-blue"><i class="fas fa-user-friends"></i></div>
                </div>
                <div class="stat-card">
                    <div class="stat-text">
                        <h3>Active Projects</h3>
                        <p class="number">1</p>
                        <a href="project.html" class="details-link">View details</a>
                    </div>
                    <div class="stat-icon icon-bg-green"><i class="fas fa-briefcase"></i></div>
                </div>
                <div class="stat-card">
                    <div class="stat-text">
                        <h3>Employees</h3>
                        <p class="number">1</p>
                        <a href="employee.html" class="details-link">View details</a>
                    </div>
                    <div class="stat-icon icon-bg-purple"><i class="fas fa-user-check"></i></div>
                </div>
                <div class="stat-card">
                    <div class="stat-text">
                        <h3>Quotes Sent</h3>
                        <p class="number">1</p>
                        <a href="quote.html" class="details-link">View details</a>
                    </div>
                    <div class="stat-icon icon-bg-orange"><i class="fas fa-file-alt"></i></div>
                </div>
                <div class="stat-card">
                    <div class="stat-text">
                        <h3>Invoices Issued</h3>
                        <p class="number">o</p>
                        <a href="invoice.html" class="details-link">View details</a>
                    </div>
                    <div class="stat-icon icon-bg-teal"><i class="fas fa-file-invoice-dollar"></i></div>
                </div>
                <div class="stat-card">
                    <div class="stat-text">
                        <h3>Inventory Items</h3>
                        <p class="number">2</p>
                        <a href="inventory.html" class="details-link">View details</a>
                    </div>
                    <div class="stat-icon icon-bg-red"><i class="fas fa-boxes"></i></div>
                </div>
            </div>

            <h3 class="section-title">Quick Actions</h3>
            
            <div class="quick-actions-grid">
                <button class="action-card" id="addClientBtn">
                    <div class="action-icon icon-bg-blue"><i class="fas fa-user-plus"></i></div>
                    <div class="action-text">
                        <span class="action-title">Add Client</span>
                        <span class="action-desc">Register new customer</span>
                    </div>
                </button>

                <button class="action-card" id="addProjectBtn">
                    <div class="action-icon icon-bg-green"><i class="fas fa-briefcase"></i></div>
                    <div class="action-text">
                        <span class="action-title">New Project</span>
                        <span class="action-desc">Create & track job</span>
                    </div>
                </button>

                <button class="action-card" id="addEmployeeBtn">
                    <div class="action-icon icon-bg-purple"><i class="fas fa-user-check"></i></div>
                    <div class="action-text">
                        <span class="action-title">Add Employee</span>
                        <span class="action-desc">Onboard team member</span>
                    </div>
                </button>

                <button class="action-card" id="addQuoteBtn">
                    <div class="action-icon icon-bg-orange"><i class="fas fa-file-alt"></i></div>
                    <div class="action-text">
                        <span class="action-title">Create Quote</span>
                        <span class="action-desc">Estimate for client</span>
                    </div>
                </button>

                <button class="action-card" onclick="window.location.href='invoice.html'">
                    <div class="action-icon icon-bg-teal"><i class="fas fa-file-invoice-dollar"></i></div>
                    <div class="action-text">
                        <span class="action-title">New Invoice</span>
                        <span class="action-desc">Bill completed work</span>
                    </div>
                </button>

                <button class="action-card" id="addItemBtn">
                    <div class="action-icon icon-bg-red"><i class="fas fa-boxes"></i></div>
                    <div class="action-text">
                        <span class="action-title">Add Item</span>
                        <span class="action-desc">Update stock levels</span>
                    </div>
                </button>
            </div>

        </main>
    </div>

    <div class="modal-overlay" id="addClientModal">
        <div class="modal-box">
            <div class="modal-header">
                <h3>Add New Client</h3>
                <span class="close-modal-btn" id="closeClientModal">&times;</span>
            </div>
            <form class="modal-form">
                <div class="input-group">
                    <label>Client Name</label>
                    <input type="text" placeholder="e.g. TechFlow Inc." required>
                </div>
                <div class="input-group">
                    <label>Email Address</label>
                    <input type="email" placeholder="contact@company.com" required>
                </div>
                <div class="input-group">
                    <label>Phone Number</label>
                    <input type="tel" placeholder="+1 234 567 890">
                </div>
                <div class="input-group">
                    <label>Address</label>
                    <input type="text" placeholder="City, Country">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancelClientModal">Cancel</button>
                    <button type="submit" class="btn-save">Save Client</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="addProjectModal">
        <div class="modal-box">
            <div class="modal-header">
                <h3>Add New Project</h3>
                <span class="close-modal-btn" id="closeProjectModal">&times;</span>
            </div>
            <form class="modal-form" onsubmit="event.preventDefault(); Swal.fire('Saved!', 'Project added.', 'success'); document.getElementById('addProjectModal').style.display='none';">
                <div class="input-group">
                    <label>Project Name</label>
                    <input type="text" id="addName" placeholder="e.g. Website Redesign" required>
                </div>
                <div class="input-group">
                    <label>Client</label>
                    <select id="addClient" required>
                        <option value="">-- Select a Client --</option>
                        <option value="John Doe">John Doe</option>
                        <option value="Jane Smith">Jane Smith</option>
                        <option value="Acme Corp">Acme Corp</option>
                    </select>
                </div>
                <div class="input-group">
                    <label>Deadline</label>
                    <input type="date" id="addDeadline" required>
                </div>
                <div class="input-group">
                    <label>Budget ($)</label>
                    <input type="number" id="addBudget" placeholder="e.g. 5000" required>
                </div>
                <div class="input-group">
                    <label>Status</label>
                    <select id="addStatus" required>
                        <option value="In Progress">In Progress</option>
                        <option value="Pending">Pending</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancelProjectModal">Cancel</button>
                    <button type="submit" class="btn-save">Save Project</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="addEmployeeModal">
        <div class="modal-box">
            <div class="modal-header">
                <h3>Add New Employee</h3>
                <span class="close-modal-btn" id="closeEmployeeModal">&times;</span>
            </div>
            <form class="modal-form">
                <div class="input-group">
                    <label>Employee Name</label>
                    <input type="name" placeholder="e.g. John Doe" required>
                </div>
                <div class="input-group">
                    <label>Role</label>
                    <input type="role" placeholder="e.g. Software Engineer" required>
                </div>
                <div class="input-group">
                    <label>Department</label>
                    <input type="dept" placeholder="e.g. IT Department">
                </div>
                <div class="input-group">
                    <label>Email Address</label>
                    <input type="email" placeholder="contact@company.com" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancelEmployeeModal">Cancel</button>
                    <button type="submit" class="btn-save">Save Employee</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="addQuoteModal">
        <div class="modal-box">
            <div class="modal-header">
                <h3>Create New Quote</h3>
                <span class="close-modal-btn" id="closeQuoteModal">&times;</span>
            </div>
            <form class="modal-form">
                <div class="input-group">
                    <label>Client Name</label>
                    <input type="text" placeholder="Client Name" required>
                </div>
                <div class="input-group">
                    <label>Quote Date</label>
                    <input type="date" id="quoteDate" required readonly> 
                </div>
                <div class="input-group">
                    <label>Valid Until</label>
                    <input type="date" required>
                </div>
                <div class="form-group">
                    <div class="line-items-header">
                        <label>Line Items</label>
                       <span class="add-item-link" id="addQuoteItemBtn">+ Add item</span>
                    </div>
                    <div id="itemsContainer"></div>
                </div> 
                <div class="input-group" style="margin-top: 15px;">
                    <label>Total Amount (₱)</label>
                    <input type="number" placeholder="0.00" step="0.01" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancelQuoteModal">Cancel</button>
                    <button type="submit" class="btn-save">Create Quote</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="addItemModal">
        <div class="modal-box">
            <div class="modal-header">
                <h3>Add New Item</h3>
                <span class="close-modal-btn" id="closeItemModal">&times;</span>
            </div>
            <form class="modal-form">
                <div class="input-group">
                    <label>Item Name</label>
                    <input type="text" placeholder="e.g. Office Chair" required>
                </div>
                <div style="display: flex; gap: 15px;">
                    <div class="input-group" style="flex:1;">
                        <label>SKU</label>
                        <input type="text" placeholder="e.g. FUR-001">
                    </div>
                    <div class="input-group" style="flex:1;">
                        <label>Category</label>
                        <select style="width: 100%; padding: 10px; border: 1px solid #e2e8f0; border-radius: 6px;">
                            <option>Furniture</option>
                            <option>Electronics</option>
                            <option>Office Supplies</option>
                        </select>
                    </div>
                </div>
                <div style="display: flex; gap: 15px;">
                    <div class="input-group" style="flex:1;">
                        <label>Price (₱)</label>
                        <input type="number" step="0.01" placeholder="0.00">
                    </div>
                    <div class="input-group" style="flex:1;">
                        <label>Initial Stock</label>
                        <input type="number" placeholder="0">
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancelItemModal">Cancel</button>
                    <button type="submit" class="btn-save">Save Item</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const profileTrigger = document.getElementById('profile-trigger');
            const dropdownMenu = document.getElementById('profile-dropdown');
            const dropdownIcon = document.querySelector('.dropdown-icon');
            const menuToggle = document.getElementById('menu-toggle');
            const sidebar = document.querySelector('.sidebar');

            if(profileTrigger) {
                profileTrigger.addEventListener('click', function(e) {
                    e.stopPropagation();
                    dropdownMenu.classList.toggle('show');
                    if (dropdownIcon) dropdownIcon.style.transform = dropdownMenu.classList.contains('show') ? 'rotate(180deg)' : 'rotate(0deg)';
                });
                window.addEventListener('click', function(e) {
                    if (!dropdownMenu.contains(e.target) && !profileTrigger.contains(e.target)) {
                        dropdownMenu.classList.remove('show');
                        if (dropdownIcon) dropdownIcon.style.transform = 'rotate(0deg)';
                    }
                });
            }

            if (menuToggle && sidebar) {
                menuToggle.addEventListener('click', (e) => {
                    e.stopPropagation(); 
                    sidebar.classList.toggle('active');
                });
                document.addEventListener('click', (e) => {
                    if (sidebar.classList.contains('active') && !sidebar.contains(e.target) && e.target !== menuToggle) {
                        sidebar.classList.remove('active');
                    }
                });
            }

            function setupModal(modalId, openBtnId, closeBtnId, cancelBtnId) {
                const modal = document.getElementById(modalId);
                const openBtn = document.getElementById(openBtnId);
                const closeBtn = document.getElementById(closeBtnId);
                const cancelBtn = document.getElementById(cancelBtnId);

                if (openBtn && modal) {
                    openBtn.addEventListener('click', () => modal.style.display = 'flex');
                }
                if (closeBtn) closeBtn.addEventListener('click', () => modal.style.display = 'none');
                if (cancelBtn) cancelBtn.addEventListener('click', () => modal.style.display = 'none');
                
                window.addEventListener('click', (e) => {
                    if (e.target === modal) modal.style.display = 'none';
                });
            }

            setupModal('addClientModal', 'addClientBtn', 'closeClientModal', 'cancelClientModal');
            setupModal('addProjectModal', 'addProjectBtn', 'closeProjectModal', 'cancelProjectModal');
            setupModal('addEmployeeModal', 'addEmployeeBtn', 'closeEmployeeModal', 'cancelEmployeeModal');
            setupModal('addQuoteModal', 'addQuoteBtn', 'closeQuoteModal', 'cancelQuoteModal');

            const addQuoteItemBtn = document.getElementById('addQuoteItemBtn');
            const itemsContainer = document.getElementById('itemsContainer');
            const quoteDateInput = document.getElementById('quoteDate');
            const quoteOpenBtn = document.getElementById('addQuoteBtn');

            if(quoteOpenBtn) {
                quoteOpenBtn.addEventListener('click', () => {
                    
                    const today = new Date();
                    const year = today.getFullYear();
                    const month = String(today.getMonth() + 1).padStart(2, '0');
                    const day = String(today.getDate()).padStart(2, '0');
                    if(quoteDateInput) quoteDateInput.value = `${year}-${month}-${day}`;
                    
                   
                    if(itemsContainer) {
                        itemsContainer.innerHTML = '';
                        createItemRow();
                    }
                });
            }

            function createItemRow() {
                const div = document.createElement('div');
                div.classList.add('item-row');
                div.innerHTML = `
                    <input type="text" class="input-desc" placeholder="Description" required>
                    <input type="number" class="input-small" placeholder="Qty" required>
                    <input type="number" class="input-small" placeholder="Price" step="0.01" required>
                    <button type="button" class="btn-remove" onclick="this.parentElement.remove()">
                        <i class="far fa-trash-alt"></i>
                    </button>`;
                itemsContainer.appendChild(div);
            }

            if(addQuoteItemBtn) {
                addQuoteItemBtn.addEventListener('click', createItemRow);
            }

  
            setupModal('addItemModal', 'addItemBtn', 'closeItemModal', 'cancelItemModal');

        });
    </script>

</body>
</html>